getgenv().bubble = false;
getgenv().sell = false;
getgenv().buyEgg = false;
getgenv().autoCoin = false;
getgenv().twilsell = false


local library = loadstring(game:HttpGet(('https://raw.githubusercontent.com/AikaV3rm/UiLib/master/Lib.lua')))()


local plr = game.Players.LocalPlayer

function autoBubble()
    spawn(function()
        while wait() do
            if not bubble then break
        end
            local args = {[1] = "BlowBubble"}
            game:GetService("ReplicatedStorage").NetworkRemoteEvent:FireServer(unpack(args));
        end
    end)
end


function CoinCollect()
    spawn(function()
       while wait() do
           if not autoCoin then break
       end
            local Pickups = game:GetService("Workspace").Pickups
            local plr = game.Players.LocalPlayer
            function GetCoin()
            local Closest = nil
            local ClosestMag = nil
            local ClosestPart = nil
            for i,v in pairs(Pickups:GetChildren()) do
            if v.Name == "Part" and v:FindFirstChild("TouchInterest") then
            --print("LOL")
            if (v.Position - plr.Character.HumanoidRootPart.Position).Magnitude < 1000 then
            if not Closest then
                Closest = v.CFrame
                ClosestPart = v
                ClosestMag = (v.Position - plr.Character.HumanoidRootPart.Position).Magnitude
            elseif (v.Position - plr.Character.HumanoidRootPart.Position).Magnitude < ClosestMag then
                Closest = v.CFrame
                ClosestPart = v
                ClosestMag = (v.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                end
           end
       end
    end
   
           game:GetService("TweenService"):Create(plr.Character.HumanoidRootPart, TweenInfo.new(1, Enum.EasingStyle.Linear), {CFrame = Closest}):Play()
           end
           while autoCoin do
            if autoCoin == false then
                break
            end
           print("ok")
           wait(1)
           GetCoin()
       end
    end
   end)
end

function autoSell()
    spawn(function()
        while wait() do
            if not sell then break
        end
            local args = {[1] = "SellBubble",[2] = "Sell"}
            game:GetService("ReplicatedStorage").NetworkRemoteEvent:FireServer(unpack(args));

            game:GetService("TweenService"):Create(plr.Character.HumanoidRootPart, TweenInfo.new(1, Enum.EasingStyle.Linear),{CFrame =game:GetService("Workspace").GumMachine.BubbleGumMachine.BubbleGumBase.CFrame}):Play()
        end
    end)
end



function Twilsell()
    spawn(function()
        while wait() do
            if not twilsell then
                break
            end
                local location = game:GetService("Workspace").FloatingIslands.Overworld["The Twilight"].ALIENDOOR.Part.CFrame
                local args = {[1] = "SellBubble",[2] = "TwilightSell"}
                game:GetService("ReplicatedStorage").NetworkRemoteEvent:FireServer(unpack(args))
                game:GetService("TweenService"):Create(plr.Character.HumanoidRootPart, TweenInfo.new(1, Enum.EasingStyle.Linear), {CFrame = location}):Play()
                wait(1)
        end
    end)
end



function autoEgg(eggType)
    spawn(function()
        while wait() do
            if not buyEgg then break
        end
            game:GetService("ReplicatedStorage").NetworkRemoteEvent:FireServer("PurchaseEgg", eggType) 
        end
    end)
end


function teleportTO(placeCFrame)
    local ts = game:GetService("TweenService"):Create(plr.Character.HumanoidRootPart, TweenInfo.new(1, Enum.EasingStyle.Linear), {CFrame = placeCFrame})
   if plr.Character then
        ts:Play()
   end
end

local tpplaceSpace = game:GetService("Workspace").FloatingIslands.Overworld.Space.TeleportPoint.CFrame
local tpplaceFloat = game:GetService("Workspace").FloatingIslands.Overworld["The Floating Island"].TeleportPoint.CFrame
local tpplaceXp = game:GetService("Workspace").FloatingIslands.Overworld["XP Island"].TeleportPoint.CFrame
local tpplaceZen = game:GetService("Workspace").FloatingIslands.Overworld.Zen.TeleportPoint.CFrame
local tpplaceSky = game:GetService("Workspace").FloatingIslands.Overworld["The Skylands"].TeleportPoint.CFrame
local tpplaceVoid = game:GetService("Workspace").FloatingIslands.Overworld["The Void"].TeleportPoint.CFrame
local tpplaceTwilight = game:GetService("Workspace").FloatingIslands.Overworld["The Twilight"].TeleportPoint.CFrame


local w = library:CreateWindow("Bubble Gum Sim") -- Creates the window

local e = library:CreateWindow("Teleports")

local z = library:CreateWindow("Credits")

local b = w:CreateFolder("Farming") -- Creates the folder(U will put here your buttons,etc)

local c = w:CreateFolder("Egg")

local d = e:CreateFolder("Teleports")

local x = z:CreateFolder("Credits To")

b:DestroyGui()

b:Toggle("AutoFarm",function(bool)
    getgenv().bubble = bool
    print('AutoFarm is: ', bool)
    if bool then
        autoBubble();
    end
end)

b:Toggle("AutoSell",function(bool)
    getgenv().sell = bool
    print('AutoSell is: ', bool)
    if bool then
        autoSell();
    end
end)

b:Toggle("Twilight Sell",function(bool)
    getgenv().twilsell = bool
    print('AutoSell is: ', bool)
    if bool then
        Twilsell();
    end
end)

b:Toggle("AutoPickups",function(bool)
    getgenv().autoCoin = bool
    print('AutoCoin is: ', bool)
    if bool then
        CoinCollect();
    end
end)

local selectedEggs
c:Dropdown("Eggs",{"Common Egg","Spotted Egg","Ice Shard Egg","Spikey Egg","Magma Egg","Crystal Egg","Lunar Egg","Void Shard Egg","Hell Egg","Nightmare Egg","Rainbow Egg"},true,function(value)
        selectedEggs = value
        print(value)
    end)
c:Toggle("AutoEgg",function(bool)
    getgenv().buyEgg = bool
    print('AutoEgg is: ', bool)
    if bool and selectedEggs then
        autoEgg(selectedEggs);
    end
end)


d:Button("Space",function()
    teleportTO(tpplaceSpace)
end)

d:Button("Float Island",function()
    teleportTO(tpplaceFloat)
end)

d:Button("XP Island",function()
    teleportTO(tpplaceXp)
end)

d:Button("Zen Island",function()
    teleportTO(tpplaceZen)
end)

d:Button("Sky Island",function()
    teleportTO(tpplaceSky)
end)

d:Button("Void Island",function()
    teleportTO(tpplaceVoid)
end)

d:Button("Twilight Island",function()
    teleportTO(tpplaceTwilight)
end)


x:Label("Luftwaffe#3973 for making  BasedProperty for helping ",{
    TextSize = 13;
    TextColor = Color3.fromRGB(255,255,255);
    BgColor = Color3.fromRGB(26, 26, 26);
}) 
